{"version":3,"sources":["data-method.js"],"names":["$","modalTemplate","join","getCSRFToken","options","token","attr","handleMethod","e","preventDefault","link","dataMethod","data","url","cb","method","toUpperCase","includes","confirm","sendRequest","ajax","sendAjax","createForm","submit","form","params","fields","_token","_method","createFields","append","appendTo","ajaxOptions","name","input","push","success","title","message","theme","window","$modal","find","html","modal","on","remove","swal","text","type","showCancelButton","confirmButtonText","closeOnConfirm","customClass","document"],"mappings":"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","file":"data-method.map","sourcesContent":["$(function() {\n    var modalTemplate = [\n        '<div class=\"modal fade laravel-data-method\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"dataMethodModalLabel\">',\n        '<div class=\"modal-dialog modal-sm\" role=\"document\">',\n        '<div class=\"modal-content\">',\n        '<div class=\"modal-header\">',\n        '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>',\n        '<h4 class=\"modal-title\" id=\"dataMethodModalLabel\"></h4>',\n        '</div>',\n        '<div class=\"modal-body\"></div>',\n        '<div class=\"modal-footer\">',\n        '<button type=\"button\" class=\"btn btn-default btn-cancel\" data-dismiss=\"modal\">Cancel</button>',\n        '<button type=\"button\" class=\"btn btn-primary btn-confirm\">Confirm</button>',\n        '</div>',\n        '</div>',\n        '</div>',\n        '</div>'\n    ].join('');\n\n    function getCSRFToken(options) {\n        return options.token || $('meta[name=csrf-token]').attr('content');\n    }\n\n    function handleMethod(e) {\n        e.preventDefault();\n        var link = $(this);\n\n        dataMethod(link.attr('href'), link.data());\n    }\n\n    function dataMethod(url, options, cb) {\n        var method = options.method || 'POST';\n        method = method.toUpperCase();\n        cb = cb || function() {};\n\n        // If the data-method attribute is not PUT or DELETE,\n        // then we don't know what to do. Just ignore.\n        if (!['POST', 'PUT', 'DELETE'].includes(method)) {\n            return;\n        }\n\n        // Allow user to optionally provide data-confirm=\"Are you sure?\"\n        if (options.confirm) {\n            confirm(options, function() {\n                cb(sendRequest(url, method, options));\n            });\n        } else {\n            cb(sendRequest(url, method, options));\n        }\n    }\n\n    function sendRequest(url, method, options) {\n        if (options.ajax) {\n            return sendAjax(url, method, options);\n        } else {\n            return createForm(url, method, options).submit();\n        }\n    }\n\n    function createForm(url, method, options) {\n        var form, params, fields, token;\n\n        form = $('<form>', {\n            'method': 'POST',\n            'action': url\n        });\n\n\n        params = options.params || {};\n        params._token = getCSRFToken(options);\n        params._method = method;\n\n        fields = createFields(params);\n\n        return form.append(fields)\n            .appendTo('body');\n    }\n\n    function sendAjax(url, method, options) {\n        var ajaxOptions = typeof options.ajax === 'object' ? options.ajax : {};\n        params = options.params || {};\n        params._token = getCSRFToken(options);\n\n        ajaxOptions.url = url;\n        ajaxOptions.method = method;\n        ajaxOptions.data = params\n        return $.ajax(ajaxOptions);\n    }\n\n    function createFields(params) {\n        var fields = [];\n\n        for (var name in params) {\n            var input =\n                $('<input>', {\n                    'name': name,\n                    'type': 'hidden',\n                    'value': params[name]\n                });\n\n            fields.push(input);\n        }\n\n        return fields;\n    }\n\n    function confirm(options, success) {\n        var title = options.title;\n        var message = options.confirm;\n        var theme = options.theme || 'default';\n\n        switch (theme) {\n            case 'default':\n                window.confirm(message) && success();\n                break;\n            case 'bootstrap':\n                var $modal = $(modalTemplate);\n                $modal.find('.modal-title').html(title);\n                $modal.find('.modal-body').html(message);\n                $modal.appendTo('body');\n                $modal.modal('show');\n\n                $modal.find('.btn-confirm').on('click', function() {\n                    $modal.modal('hide');\n                    success();\n                });\n\n                $modal.on('hidden.bs.modal', function() {\n                    $modal.remove();\n                });\n                break;\n            case 'sweetalert':\n                swal({\n                        title: title,\n                        text: message,\n                        type: \"warning\",\n                        showCancelButton: true,\n                        confirmButtonText: \"Confirm\",\n                        closeOnConfirm: false,\n                        customClass: 'laravel-data-method'\n                    },\n                    function() {\n                        success();\n                    });\n                break;\n        }\n    }\n\n    $(document).on('click', 'a[data-method]', handleMethod);\n    window.dataMethod = dataMethod;\n});\n"]}